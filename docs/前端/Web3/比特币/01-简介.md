# 比特币

比特币是一种基于区块链技术的去中心化的**数字货币**，旨在提供一种安全、透明的交易方式。

那么，什么是数字货币？

## 一、数字货币

数字货币是基于数字形式存在的货币，可以通过电子方式进行存储、转移和交易。其最大作用在于突破传统货币交易的天然实体壁障，给交易带来了巨大的便利。  

数字货币可分为两大类：
- 中央银行数字货币（CBDC）
- 加密货币

加密货币是一种基于密码学技术的数字货币，其最大特点在于去中心化。即没有中央银行或政府机构控制，无任何政府、机构、组织背书，而是由网络中的所有参与者共同维护一个分布式的账本。

这就带来一些问题：
- 既是货币？ 谁来发行？发行多少？
- 即是账本，谁来维护？
- 如何确保账本的一致性？
- 如何防止双花攻击（Double-Spending Attack）？
- 如何防止伪造？
- 如何消费使用这些货币？



简单讲，比特币通过**共识机制**来确保账本的安全性，通过**挖矿**来确保账本的维护，通过**交易**来确保货币的使用，通过特定数据结构防止篡改。


<!-- ## 一、比特币的核心概念

### 1.1 交易（Transaction）
用户之间的 `BTC` 转账被称为交易。交易使用 `UTXO`（未花费交易输出）模型来追踪账户余额。交易包含输入（`Inputs`）和输出（`Outputs`），确保资金流向透明。

### 1.2 区块（Block）
交易被打包成区块（`Block`），每个区块包含多笔交易。

### 1.3 挖矿（Mining）
矿工使用工作量证明（`Proof of Work, PoW`）竞争记账权，也就是争夺新增区块的资格。

### 1.4 共识机制
比特币使用 `PoW`（工作量证明）确保网络安全。只有符合规则的区块才能被全网接受，防止篡改。

## 二、比特币的历史

| 时间 | 事件                                                                     |
| ---- | ------------------------------------------------------------------------ |
| 2008 | 中本聪发布比特币白皮书《Bitcoin: A Peer-to-Peer Electronic Cash System》 |
| 2009 | 比特币创世区块诞生，区块奖励 50 BTC                                      |
| 2010 | 发生第一笔比特币支付（1 万 BTC 购买 2 个披萨 🍕）                         |
| 2013 | 比特币价格突破 1000 美元                                                 |
| 2017 | 比特币扩容争议，分裂出比特币现金（BCH），价格破 2 万美元                 |
| 2021 | 比特币达到历史最高价 69,000 美元                                         |
| 2024 | 预计第四次区块奖励减半（至 3.125 BTC）                                   |

## 三、比特币与传统法币的比较

| 特性     | 比特币（BTC）      | 传统法币（美元、人民币等） |
| -------- | ------------------ | -------------------------- |
| 供应量   | 固定 2100 万枚     | 可无限印刷（通胀风险）     |
| 控制机构 | 无中心化机构       | 央行、政府                 |
| 交易方式 | 去中心化，P2P 交易 | 依赖银行或支付机构         |
| 转账速度 | 10 分钟确认        | 可能需要数小时或数天       |
| 安全性   | 交易不可篡改       | 可能被伪造或冻结           |
| 匿名性   | 仅公开地址，无实名 | 银行账户需实名             |

## 四、数字货币概述

比特币本质是**去中心化**的**数字货币**。



:::

<!-- - 既是货币，那就牵扯到发行。货币该由谁发行，如何发行，发行多少？何时发行？  
    中心化系统中这是央行需要考虑的问题。而在比特币系统中，**由挖矿来决定货币发行权和发行量**。
- 如何验证交易有效？如何防止双花攻击？  
    在中心化的系统中，这同样需要中央银行来解决。而在比特币系统中，交易的有效性验证依赖于系统中维护的一个数据结构，记录货币的使用情况（是否被花过？被谁花过？）。  
    该数据结构由系统中全体用户共同维护，保证了交易的有效性。该数据结构，便是区块链。

 -->


<!-- 
## 五、安全性与攻击

### 5.1 双花攻击（Double-Spending Attack）
双花攻击是指在数字货币或加密货币系统中，一个人试图使用相同的一笔货币在不同的交易中进行多次支付。  
举例：攻击者试图利用网络延迟或其他系统特性，使同一笔加密货币同时在两笔交易中被使用。简单来说，攻击者创建两笔交易，并希望它们都被验证和记账，达到用一笔钱支付两次的效果。

## 六、共识问题与挖矿

### 6.1 共识问题
- 既是货币，那就牵扯到发行。货币该由谁发行，如何发行，发行多少？何时发行？中心化系统中这是央行需要考虑的问题。而在比特币系统中，**由挖矿来决定货币发行权和发行量**。
- 如何验证交易有效？如何防止双花攻击？  
    在中心化的系统中，这是需要中央银行来解决。而在比特币系统中，交易的有效性验证依赖于系统中维护的一个数据结构，记录货币的使用情况（是否被花过？被谁花过？）。  
    该数据结构由系统中全体用户共同维护，保证了交易的有效性。该数据结构，便是区块链。

比特币系统依靠名为**工作量证明**（Proof of Work，PoW）的**共识协议**来处理如上问题。

::: tip 共识协议
共识协议是分布式系统中用来确保多个节点（参与者）就某个状态或决策达成一致的机制。
除了比特币所使用的 PoW 算法，还有其他共识协议，如 PBFT、Raft、ZAB、ViewStamped Replication 等。
:::


### 6.2 工作量证明（Proof of Work，PoW）
简单讲就是通过计算来证明你有能力解决某个问题。比特币系统中，通过挖矿来获得记账权。

- 挖矿的过程：
  - 选择一个随机数（nonce）
  - 在交易池中挑选交易，将这些交易列表放入`block body`中。
  - 计算 `Hash（block header + nonce）`
  - 如果 `Hash（block header + nonce）< target`，则证明你有能力解决这个问题，可以获得记账权。
  - 否则，重复上述过程，直到找到符合条件的 nonce。

- 挖矿的目标值：
  - 目标值越大，挖矿难度越小
  - 目标值越小，挖矿难度越大
  - 目标值根据网络的总算力和区块生成时间动态调整，以保持平均每 10 分钟生成一个新区块。

- 挖矿的奖励：记账权 + **Block Reward**
  - 矿工将获得一定数量的比特币作为奖励。起始为 50 BTC，每 210,000 （大约 4 年）个区块减半。
  - 在挖矿开始前，矿工会在交易池中挑选交易，将这些交易打包成区块。除了区块奖励，还有这些交易的交易费用作为奖励。
  - 这个激励机制鼓励矿工们积极打包交易，并帮助网络的运行。

- 行使记账权
  - 所谓记账权，其实就是候选区块转正的过程。
  - 一旦成功挖矿成功将拥有记账权，矿工将完整的新区块（包括其哈希值和所有打包的交易）提交给区块链网络。
  - 其他节点将验证该区块，并将其添加到自身节点维护的区块链中


## 参考

[北京大学肖臻老师《区块链技术与应用》](https://www.bilibili.com/video/av37065233/?p=4)
 --> -->

## 参考

[北京大学肖臻老师《区块链技术与应用》](https://www.bilibili.com/video/av37065233/?p=4)